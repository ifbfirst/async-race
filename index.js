(()=>{"use strict";var t={708:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(601),a=n.n(o),r=n(314),i=n.n(r)()(a());i.push([t.id,"#wrapper {\n  padding: 20px;\n}\n\n#wrapper-winners {\n  display: none;\n}\n\nh3 {\n  display: inline-block;\n  margin-left: 10px;\n}\n\nh2 {\n  margin: 0;\n}\n.car-wrapper {\n  display: flex;\n  flex-direction: row;\n}\n.car {\n  font-size: 36px;\n  padding-left: 10px;\n  margin-left: 0px;\n  text-shadow: 0px 0px 1px var(--text-color);\n}\n.flag {\n  position: absolute;\n  right: 100px;\n  font-size: 35px;\n  color: var(--accent-color);\n}\n.road {\n  max-width: 1440px;\n  margin-bottom: 7px;\n  padding: 0 10px;\n  background-color: var(--dark-color);\n  border-bottom: 4px dashed var(--light-color);\n  position: relative;\n}\n.main-button {\n  font-size: 16px;\n  padding: 5px 10px;\n  margin: 10px 5px;\n  cursor: pointer;\n  background-color: var(--main-button-color);\n  border: none;\n  color: var(--text-color);\n}\n.main-button:hover,\n.next-btn:hover,\n.previous-btn:hover {\n  background-color: #d3d3d3;\n  transition: all 1s;\n}\n\n#btnGarage,\n#btnWinners {\n  padding: 20px;\n  max-width: 150px;\n  text-transform: uppercase;\n  font-weight: 600;\n  border-bottom: 4px dashed var(--dark-color);\n}\n\n.next-btn,\n.previous-btn {\n  cursor: pointer;\n  width: 100px;\n  border: none;\n  padding: 5px;\n  margin: 10px;\n  font-weight: 600;\n  color: var(--text-color);\n}\n.next-btn::after {\n  content: '\\00BB';\n  color: var(--dark-color);\n  margin: 5px;\n}\n.previous-btn::before {\n  content: '\\00AB';\n  color: var(--dark-color);\n  margin: 5px;\n}\n.car-button {\n  width: 25px;\n  padding: 5px;\n  margin: 0px 5px 10px 5px;\n  cursor: pointer;\n  border: none;\n  background-color: var(--accent-color);\n  font-weight: 400;\n}\n.car-button:hover {\n  background-color: var(--accent-light-color);\n}\ninput {\n  height: 23px;\n  margin-right: 10px;\n}\n.disabled {\n  pointer-events: none;\n  color: var(--main-color);\n}\n\n#first {\n  font-size: 24px;\n  font-weight: 600;\n  width: 400px;\n  margin: 0 auto;\n  height: 30px;\n}\n\ntable {\n  background-color: var(--light-color);\n}\ntd,\nth {\n  border: 1px solid var(--dark-color);\n  padding: 10px;\n}\n\nth {\n  cursor: pointer;\n}\n",""]);const s=i},208:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(601),a=n.n(o),r=n(314),i=n.n(r)()(a());i.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap);"]),i.push([t.id,":root {\n  --main-color: #c3c3c3;\n  --main-button-color: #edebeb;\n  --text-color: #2f2f2f;\n  --accent-color: #fe2e2e;\n  --accent-light-color: #fa4040;\n  --dark-color: #989898;\n  --light-color: #e2e1e1;\n}\n\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  background-color: var(--main-color);\n  margin: 20px;\n  font:\n    16px Inter,\n    sans-serif;\n  color: var(--text-color);\n}\n",""]);const s=i},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,a,r){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);o&&i[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),e.push(d))}},e}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var r={},i=[],s=0;s<t.length;s++){var c=t[s],l=o.base?c[0]+o.base:c[0],d=r[l]||0,u="".concat(l," ").concat(d);r[l]=d+1;var m=n(u),g={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==m)e[m].references++,e[m].updater(g);else{var h=a(g,o);o.byIndex=s,e.splice(s,0,{identifier:u,updater:h,references:1})}i.push(u)}return i}function a(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,a){var r=o(t=t||[],a=a||{});return function(t){t=t||[];for(var i=0;i<r.length;i++){var s=n(r[i]);e[s].references--}for(var c=o(t,a),l=0;l<r.length;l++){var d=n(r[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}r=c}}},659:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,a&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var r=e[o]={id:o,exports:{}};return t[o](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{function t(t,e,n,o,a){const r=document.createElement(`${t}`);return o&&(r.className=`${o}`),n&&(r.textContent=`${n}`),a&&(r.id=a),e&&e.append(r),r}function e(t,e,n){const o=document.createElement("input");return o.type=e,o.id=n,t.append(o),o}function o(){const t=document.querySelectorAll(".road"),e=[];return Array.from(t).forEach((t=>{e.push(t.id)})),e}function a(t){y(t),cancelAnimationFrame(d);const e=document.getElementById(`A${t}`);e?.classList.remove("disabled");const n=document.getElementById(`B${t}`);n?.classList.add("disabled");const o=document.getElementById(`${t}`),a=o?.querySelector(".car");a.style.marginLeft="0px"}function r(){p("http://127.0.0.1:3000/garage").then((t=>{t&&(document.getElementsByTagName("h1")[0].textContent=`Garage(${t.cars.length})`,t.cars.length>7&&document.querySelectorAll(".next-btn")[0]?.classList.remove("disabled"))}))}function i(){const t=document.getElementsByClassName("road");Array.from(t).forEach((t=>{t.remove()}))}function s(){const t=document.getElementsByTagName("tr");Array.from(t).forEach(((t,e)=>{0!==e&&t.remove()}))}function c(){console.log("hello"),v("http://127.0.0.1:3000/winners").then((t=>{t&&(document.getElementsByTagName("h1")[1].textContent=`Winners (${t.winners.length})`,t.winners.length>10&&document.querySelectorAll(".next-btn")[1]?.classList.remove("disabled"))}))}const l=180;let d,u=[],m=[];function g(t,e){let n;const o=document.getElementById(`${t}`),a=o?.querySelector(".car"),r=e.distance/e.velocity;o&&function(t,e,o){let r=performance.now();requestAnimationFrame((function t(i){let s=i-r;s>e&&(s=e),function(t,e,n){a.style.marginLeft=n/e*t+"px"}(s,e,o),s<e&&(n=requestAnimationFrame(t),d=n)}))}(0,r,o?.offsetWidth-l),async function(t){return await fetch(`http://127.0.0.1:3000/engine?id=${Number(t)}&status=drive`,{method:"PATCH"})}(t).then((o=>{500===o.status?(y(t),cancelAnimationFrame(n)):200===o.status&&(u.push(t),m.push(e.velocity),1===u.length&&(function(t,e){const n=document.getElementById(t),o=n?.getElementsByTagName("h3")[0].textContent;if(n){let a=Number(((n.offsetWidth-l)/e).toFixed(2));const r=document.getElementById("first");r&&(r.textContent="",r.textContent=`${o} finished in ${a} s `),function(t,e){x(Number(t)).then((n=>{n?(n.time<e&&(e=n.time),async function(t,e,n){let o={wins:e,time:n};await fetch(`http://127.0.0.1:3000/winners/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),document.getElementById(`tr${t}`)?.remove();const a=new h(t,e,n);document.getElementsByTagName("table")[0]?.appendChild(a.getResultTag())}(Number(t),n.wins+1,e)):async function(t,e,n){const o={id:t,time:n,wins:1};await fetch("http://127.0.0.1:3000/winners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});const a=new h(t,1,n);document.getElementsByTagName("table")[0]?.appendChild(a.getResultTag()),c()}(Number(t),0,e)}))}(t,a)}}(u[0],m[0]),function(){const t=document.getElementById("reset");t?.classList.remove("disabled");const e=document.getElementById("btnWinners");e?.classList.remove("disabled")}()))}))}class h{getResultTag(){return this.tagResult}constructor(t,e,n){this.tagResult=document.createElement("tr"),this.id=t,this.wins=e,this.time=n,this.tagResult.id=`tr${t}`,this.viewWinner(t)}viewWinner(t){(async function(t){let e=await fetch(`http://127.0.0.1:3000/garage/${t}`);if(e.ok)return await e.json()})(t).then((t=>{let e=[this.id,`<i class="fa-solid fa-car-side" style="color:${t?.color};"</i>`,t?.name,this.wins,this.time];for(let t=0;t<e.length;t+=1){const n=document.createElement("td");this.tagResult.appendChild(n),n.innerHTML=`${e[t]}`}}))}}async function p(t){let e=await fetch(t);if(e.ok)return{cars:await e.json(),count:e.headers.get("X-Total-Count")}}async function f(t,e){t||(t="Unknown");let n={name:t,color:e};await fetch("http://127.0.0.1:3000/garage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),r()}async function b(t){document.getElementById(`A${t}`)?.classList.add("disabled"),document.getElementById(`B${t}`)?.classList.remove("disabled");const e=document.getElementById("first");e&&(e.textContent="");let n=await fetch(`http://127.0.0.1:3000/engine?id=${Number(t)}&status=started`,{method:"PATCH"});if(n.ok){let e=await n.json();return g(t,e),{id:t,velocity:e.velocity}}}async function y(t){await fetch(`http://127.0.0.1:3000/engine?id=${Number(t)}&status=stopped`,{method:"PATCH"})}async function v(t){let e=await fetch(t);if(e.ok)return{winners:await e.json(),count:e.headers.get("X-Total-Count")}}async function x(t){let e=await fetch(`http://127.0.0.1:3000/winners/${t}`);if(e.ok)return await e.json();e.status}class w{getResultTag(){return this.tagResult}constructor(e,n,o){this.tagResult=t("div",null,"","road"),this.name=e,this.color=n,this.tagResult.id=o,this.id=o,this.viewRoad()}viewRoad(){t("button",this.tagResult,"select","main-button","select").onclick=()=>this.selectCar(this.id),t("button",this.tagResult,"remove","main-button","remove").onclick=()=>async function(t){await fetch(`http://127.0.0.1:3000/garage/${t}`,{method:"DELETE"}),x(Number(t)).then((e=>{e&&async function(t){document.getElementById(`tr${t}`)?.remove(),await fetch(`http://127.0.0.1:3000/winners/${Number(t)}`,{method:"DELETE"})}(t)})),document.getElementById(`${t}`)?.remove(),r()}(this.id),t("h3",this.tagResult,this.name);const e=t("div",this.tagResult,"","car-wrapper");t("button",e,"A","car-button",`A${this.id}`).onclick=()=>b(this.id),t("button",e,"B","car-button",`B${this.id}`).onclick=()=>a(this.id);const n=t("div",e,"","flag");n.innerHTML='<i class="fa-solid fa-flag"></i>',this.viewCar(n)}viewCar(e){const n=t("div",null,"","car");e.before(n),n.innerHTML='<i class="fa-solid fa-car-side"></i>',n.style.color=this.color}selectCar(t){const e=document.getElementById("color-change");e?.classList.remove("disabled");const n=document.getElementById("name-change");n?.classList.remove("disabled");const o=document.getElementById("update");o.classList.remove("disabled"),n&&e&&(o.onclick=()=>async function(t,e,n){let o,a=document.getElementById(`${n}`),r=a?.querySelector(".car"),i=a?.getElementsByTagName("h3")[0];t?(o={name:t,color:e},r.style.color=`${e}`,i.textContent=`${t}`):(o={name:i.textContent,color:e},i.textContent=`${i.textContent}`,r.style.color=`${e}`);let s=await fetch(`http://127.0.0.1:3000/garage/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});await s.json()}(n.value,e.value,t))}}function E(t){p(`http://127.0.0.1:3000/garage?_page=${t}&_limit=7`).then((e=>{if(e){for(let t=0;t<e.cars.length;t+=1){const n=new w(e.cars[t].name,e.cars[t].color,e.cars[t].id);document.getElementById("wrapper-garage")?.appendChild(n.getResultTag())}document.getElementsByTagName("h1")[0].textContent=`Garage(${e.count})`,document.getElementsByTagName("h2")[0].textContent=`Page ${t}`}}))}class C{getResultTag(){return this.tagResult}constructor(){this.tagResult=document.createElement("div"),t("button",this.tagResult,"previous","previous-btn disabled","previous").onclick=()=>this.previousPage(),t("button",this.tagResult,"next","next-btn disabled","next").onclick=()=>this.nextPage()}previousPage(){this.onPreviousAction()}nextPage(){this.onNextAction()}}class T{getResultTag(){return this.tagResult}constructor(){this.navigation=new C,this.tagResult=document.createElement("div"),this.pageNumber=1,this.tagResult.id="wrapper-garage",document.body.appendChild(this.tagResult),this.init(),this.createAdminView(),this.createGarageView()}init(){this.navigation.onPreviousAction=()=>{const t=document.querySelectorAll(".previous-btn")[0],e=document.querySelectorAll(".next-btn")[0];e?.classList.remove("disabled"),2===this.pageNumber&&t?.classList.add("disabled"),this.pageNumber-=1,i(),E(this.pageNumber)},this.navigation.onNextAction=()=>{const t=document.querySelectorAll(".previous-btn")[0],e=document.querySelectorAll(".next-btn")[0],n=document.getElementById("race");n?.classList.remove("disabled");const o=document.getElementById("first");o&&(o.textContent="");const a=document.getElementsByTagName("h1")[0];if(t?.classList.remove("disabled"),a.textContent){const t=parseInt(a.textContent.replace(/\D+/g,""));this.pageNumber!==Math.floor(t/7)&&0!==t||e?.classList.add("disabled")}this.pageNumber+=1,i(),E(this.pageNumber)}}createGarageView(){t("h1",this.tagResult),r(),t("h2",this.tagResult,`Page ${this.pageNumber}`),t("div",this.tagResult,"","","first"),this.tagResult.appendChild(this.navigation.getResultTag()),E(1)}createAdminView(){const n=t("div",this.tagResult);e(n,"text","name"),e(n,"color","color"),t("button",n,"create","main-button","create").onclick=()=>function(){const t=document.getElementById("color");f(document.getElementById("name").value,t.value).then((()=>{i(),E(1)}))}();const r=document.createElement("div");this.tagResult.appendChild(r),e(r,"text","name-change"),e(r,"color","color-change"),t("button",r,"update","main-button disabled","update");const s=document.createElement("div");this.tagResult.appendChild(s),t("button",s,"race","main-button","race").onclick=()=>function(){const t=document.getElementById("race"),e=document.getElementById("btnWinners");e?.classList.add("disabled"),t?.classList.add("disabled");const n=o();u.length=0,m.length=0;for(let t=0;t<n.length;t+=1)b(`${n[t]}`)}(),t("button",s,"reset","main-button disabled","reset").onclick=()=>function(){const t=document.getElementById("race"),e=document.getElementById("reset"),n=document.getElementById("first");u.length=0,m.length=0,n&&(n.textContent=""),t?.classList.remove("disabled"),e?.classList.add("disabled");const r=o();for(let t=0;t<r.length;t+=1)a(r[t])}(),t("button",s,"generate cars","main-button","generate-cars").onclick=()=>function(){const t=["Audi","Toyota","BMW","Ford","Honda","Mazda","Hyundai","Nissan","Renault","Kia"],e=["A6","S5","Sonata","Corolla","Supra","Murano","Terrano","Duster","Kaptur","Duster"];for(let n=0;n<100;n+=1)f(`${t[Math.floor(Math.random()*t.length)]} ${e[Math.floor(Math.random()*t.length)]}`,`#${Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0")}`);i(),E(1)}()}}function B(t){const e=document.getElementsByTagName("table")[0];v(`http://127.0.0.1:3000/winners?_page=${t}&_limit=10`).then((n=>{if(n){for(let t=0;t<n.winners.length;t+=1){const o=new h(n.winners[t].id,n.winners[t].wins,n.winners[t].time);e.appendChild(o.getResultTag())}document.getElementsByTagName("h1")[1].textContent=`Winners(${n.count})`,document.getElementsByTagName("h2")[1].textContent=`Page ${t}`}}))}class N{constructor(){this.navigation=new C,this.tagResult=document.createElement("div"),this.pageNumber=1,this.init(),this.createWinnersView()}init(){document.body.appendChild(this.tagResult),this.tagResult.id="wrapper-winners",this.navigation.onPreviousAction=()=>{const t=document.querySelectorAll(".previous-btn")[1],e=document.querySelectorAll(".next-btn")[1];e?.classList.remove("disabled"),2===this.pageNumber&&t?.classList.add("disabled"),this.pageNumber-=1,s(),B(this.pageNumber)},this.navigation.onNextAction=()=>{const t=document.querySelectorAll(".previous-btn")[1],e=document.querySelectorAll(".next-btn")[1],n=document.getElementsByTagName("h1")[1];if(n.textContent){const t=parseInt(n.textContent.replace(/\D+/g,""));this.pageNumber!==Math.floor(t/10)&&0!==t||e?.classList.add("disabled")}s(),this.pageNumber+=1,t?.classList.remove("disabled"),B(this.pageNumber)}}createWinnersView(){this.tagResult.style.display="none",t("h1",this.tagResult),c(),t("h2",this.tagResult,`Page(${this.pageNumber})`),this.tagResult.appendChild(this.navigation.getResultTag());const e=t("table",this.tagResult),n=t("tr",e);let o=["Number","Car","Name","Wins","Time"];for(let t=0;t<o.length;t+=1){const e=document.createElement("th");e.textContent=`${o[t]}`,n.appendChild(e)}B(1)}}var R=n(72),A=n.n(R),$=n(825),I=n.n($),k=n(659),L=n.n(k),S=n(56),P=n.n(S),M=n(540),q=n.n(M),W=n(113),j=n.n(W),H=n(708),O={};O.styleTagTransform=j(),O.setAttributes=P(),O.insert=L().bind(null,"head"),O.domAPI=I(),O.insertStyleElement=q(),A()(H.A,O),H.A&&H.A.locals&&H.A.locals;var F=n(208),G={};G.styleTagTransform=j(),G.setAttributes=P(),G.insert=L().bind(null,"head"),G.domAPI=I(),G.insertStyleElement=q(),A()(F.A,G),F.A&&F.A.locals&&F.A.locals,(new class{getResultTag(){return this.tagResult}constructor(){this.tagResult=document.body}start(){const e=t("button",this.tagResult,"to garage","main-button","btnGarage"),n=t("button",this.tagResult,"to winners","main-button","btnWinners");e.onclick=this.toGarage.bind(this),n.onclick=this.toWinners.bind(this),new T,new N}toGarage(){const t=document.getElementById("wrapper-garage");t&&(t.style.display="block");const e=document.getElementById("wrapper-winners");e&&(e.style.display="none")}toWinners(){const t=document.getElementById("wrapper-garage");t&&(t.style.display="none");const e=document.getElementById("wrapper-winners");e&&(e.style.display="block")}}).start()})()})();